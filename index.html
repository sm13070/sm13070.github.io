<!DOCTYPE html>
<html>
	<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Draggable Flip Card</title>
    <style>
        body {
            /* Add an area to drag the card within */
            min-height: 500px; 
            padding: 20px;
            position: relative;
        }

        .flip-card {
            width: 200px;
            height: 300px;
            background-color: transparent;
            perspective: 1000px; /* Gives the 3D effect */
            cursor: move; /* Changes cursor to indicate it's draggable */
            position: absolute; /* Allows for drag positioning via JS */
            top: 50px; /* Initial position */
            left: 50px; /* Initial position */
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d; /* Preserves 3D position of children */
        }

        /* Class added by JavaScript to trigger the flip */
        .flip-card.is-flipped .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden; /* Safari */
            backface-visibility: hidden; /* Hide the back side until flipped */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            
        }

        .flip-card-front {
            
        }

        .flip-card-back {
       
            transform: rotateY(180deg); /* Start from flipped position */
        }
    </style>

</head>
<body>
<img src="fracture bg.png">

<div id="draggable" class="dragme"></div>
<img src="fracture door.png" class="dragme">
<img src="fracture friend.png" class="dragme">
<img src="fracture red alone.png" class="dragme">
<img src="fracture window.png" class="dragme">
<style>
  .dragme {
  position: relative;
  cursor: move;

</style>

<script>

  	function startDrag(e) {
				// determine event object
				if (!e) {
					var e = window.event;
				}
                if(e.preventDefault) e.preventDefault();

				// IE uses srcElement, others use target
				var targ = e.target ? e.target : e.srcElement;

				if (targ.className != 'dragme') {return};
				// calculate event X, Y coordinates
					offsetX = e.clientX;
					offsetY = e.clientY;

				// assign default values for top and left properties
				if(!targ.style.left) { targ.style.left='0px'};
				if (!targ.style.top) { targ.style.top='0px'};

				// calculate integer values for top and left 
				// properties
				coordX = parseInt(targ.style.left);
				coordY = parseInt(targ.style.top);
				drag = true;

				// move div element
					document.onmousemove=dragDiv;
                return false;
				
			}
			function dragDiv(e) {
				if (!drag) {return};
				if (!e) { var e= window.event};
				var targ=e.target?e.target:e.srcElement;
				// move div element
				targ.style.left=coordX+e.clientX-offsetX+'px';
				targ.style.top=coordY+e.clientY-offsetY+'px';
				return false;
			}
			function stopDrag() {
				drag=false;
			}
			window.onload = function() {
				document.onmousedown = startDrag;
				document.onmouseup = stopDrag;
			}
</script>
	<div class="flip-card" draggable="true" id="myCard">
        <div class="flip-card-inner">
            <div class="flip-card-front">
                <img src="fracturered text.png">
            </div>
            <div class="flip-card-back">
                <img src="fractureblue text.png"
            </div>
        </div>
    </div>

    <script>
        // Function to make an element draggable (custom implementation for easier positioning)
        function dragElement(elmnt) {
            var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            
            // If you only want to drag from the front face (e.g., if back has buttons)
            // use: if (document.getElementById(elmnt.id + "header")) { ... }

            elmnt.onmousedown = dragMouseDown;

            function dragMouseDown(e) {
                e = e || window.event;
                e.preventDefault();
                // Get the mouse cursor position at startup:
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                // Call a function whenever the cursor moves:
                document.onmousemove = elementDrag;
            }

            function elementDrag(e) {
                e = e || window.event;
                e.preventDefault();
                // Calculate the new cursor position:
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                // Set the element's new position:
                elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
                elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
            }

            function closeDragElement() {
                // Stop moving when mouse button is released:
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }

        // Function to flip the card on click
        function setupFlip(cardElement) {
            cardElement.addEventListener('click', function(event) {
                // Prevent drag initiation from interfering with flip
                if (event.detail === 1) { // Only flip on a single click
                   this.classList.toggle('is-flipped');
                }
            });
        }

        // Initialize the card
        const myCard = document.getElementById("myCard");
        dragElement(myCard); // Make it draggable
        setupFlip(myCard); // Make it flippable
    </script>


</body>
</html>

